<script>
  // Initialize theme toggle button
  const themeToggle = document.querySelector('button[aria-pressed]') as HTMLButtonElement
  themeToggle.setAttribute('aria-pressed', String(document.documentElement.classList.contains('dark')))

  // Core theme switching logic
  function switchTheme() {
    const isDark = document.documentElement.classList.toggle('dark')
    themeToggle.setAttribute('aria-pressed', String(isDark))
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
  }

  // Handle theme toggle with view transitions API
  function toggleTheme() {
    if (!document.startViewTransition) {
      switchTheme()
      return
    }
    document.startViewTransition(switchTheme)
  }

  themeToggle.addEventListener('click', toggleTheme)
</script>

<button
  aria-pressed="false"
  aria-label="Theme Toggle Button"
  class="absolute right-10 top-10 z-999 aspect-square w-8 c-secondary"
>
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
    <path d="m12 1c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11m0 20c-5.8 0-10.5-4-10.5-9s4.7-9 10.5-9 10.5 4 10.5 9-4.7 9-10.5 9" />
  </svg>
</button>
